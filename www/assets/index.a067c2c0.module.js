var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,r=(t,a,n)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n,c=(e,t)=>{for(var a in t||(t={}))s.call(t,a)&&r(e,a,t[a]);if(n)for(var a of n(t))l.call(t,a)&&r(e,a,t[a]);return e},o=(e,n)=>t(e,a(n)),i=(e,t)=>{var a={};for(var r in e)s.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&n)for(var r of n(e))t.indexOf(r)<0&&l.call(e,r)&&(a[r]=e[r]);return a},m=(e,t,a)=>new Promise(((n,s)=>{var l=e=>{try{c(a.next(e))}catch(t){s(t)}},r=e=>{try{c(a.throw(e))}catch(t){s(t)}},c=e=>e.done?n(e.value):Promise.resolve(e.value).then(l,r);c((a=a.apply(e,t)).next())}));import{a as d,z as u,c as h,R as p,T as g,r as E,A as y,b as f,Z as N,I as b,d as v,e as x,C,f as S,B as z,g as k,h as T,i as w,j as A,k as O,u as D,l as _,m as P,P as F,n as M,o as j,p as L,q as I,s as K,t as B,v as G,w as U,x as $}from"./vendor.5ab41175.module.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const q={ENV:"production",BASE_URL:"http://localhost:5000",OA_ID:"564277748393618292",DEFAULT_ACCESS_TOKEN:"NULL"},H=e=>d.setStorage({data:{token:e},fail:e=>console.log("Failed to save token to storage. Details: ",e)}),Q=()=>new Promise((e=>{d.getStorage({keys:["addresses"],success:({addresses:t})=>{t&&t.filter&&e(t.filter((e=>!!e&&!!e.address))),e([])},fail:t=>{console.log("Failed to get addresses from storage. Details: ",t),e([])}})})),V=e=>m(this,null,(function*(){const t=yield Q();return t.push(e),d.setStorage({data:{addresses:t},fail:e=>console.log("Failed to save new address to storage. Details: ",e)}),t})),R=e=>m(this,null,(function*(){return yield d.setStorage({data:{products:e},fail:e=>console.log("Failed to save products to cache. Details: ",e)}),e})),X=()=>new Promise((e=>{d.getStorage({keys:["user"],success:({user:t})=>{t&&e(t),e()},fail:t=>{console.log("Failed to load user from cache. Details: ",t),e()}})})),Z=e=>m(this,null,(function*(){return yield d.setStorage({data:{user:e},fail:e=>console.log("Failed to save user to cache. Details: ",e)}),e})),J=q.BASE_URL,W=(e,t,a)=>m(this,null,(function*(){const n={"Content-Type":"application/json"},s=yield new Promise((e=>{d.getStorage({keys:["token"],success:({token:t})=>{e(t)},fail:t=>{console.log("Failed to get token from storage. Details: ",t),e(null)}})}));return s&&(n.Authorization=`Bearer ${s}`),fetch(`${J}/${t}`,{method:e,body:JSON.stringify(a),headers:n})})),Y=e=>m(this,null,(function*(){try{const t=yield(yield W("POST","users/login",{accessToken:e})).json();return!!t.data.jwt&&(yield H(t.data.jwt),!0)}catch(t){return console.log("Error logging in. Details: ",t),!1}})),ee=e=>m(this,null,(function*(){try{let t="";e&&Date.now()<e.zaloOAExpires&&(t=e.zaloOACode);const a=yield(yield W("POST","users/login-oa",{code:t})).json();return!!a.data.jwt&&(yield H(a.data.jwt),!0)}catch(t){return console.log("Error logging in. Details: ",t),!1}})),te=()=>m(this,null,(function*(){try{return(yield(yield W("GET","users/logged-in")).json()).data}catch(e){return console.log("Error get current user info. Details: ",e),null}})),ae=()=>m(this,null,(function*(){try{return(yield(yield W("GET","products/by-category")).json()).data}catch(e){return console.log("Error fetching products. Details: ",e),[]}})),ne=e=>m(this,null,(function*(){try{const t=yield W("POST","orders/checkout",e);return yield t.json()}catch(t){return console.log("Error placing an order. Details: ",t),!1}})),se=()=>m(this,null,(function*(){var e;try{return null!=(e=(yield(yield W("GET","orders/history")).json()).data)?e:[]}catch(t){return console.log("Error fetching placed orders. Details: ",t),[]}})),le=()=>new Promise((e=>{d.login({success:()=>m(this,null,(function*(){d.getAccessToken({success:t=>{"DEFAULT ACCESS TOKEN"===t&&q.DEFAULT_ACCESS_TOKEN&&(t=q.DEFAULT_ACCESS_TOKEN),e(t)},fail:e=>{console.error(e)}})})),fail:e=>{console.error(e)}})})),re=()=>{d.followOA({id:q.OA_ID,success:()=>{ce.dispatch("setUser",o(c({},ce.state.user),{isFollowing:!0})),u.toast.create({text:"Cảm ơn bạn đã theo dõi OA thành công!",closeTimeout:3e3}).open()},fail:e=>{console.log("Failed to follow OA. Details: ",e)}})},ce=h({state:{user:null,showCheckout:!1,shipping:!1,categories:["Cà Phê","Trà","Bánh Ngọt","Thức Uống Khác"],loadingProducts:!0,products:[],loadingOrders:!0,orders:[],selectedAddress:null,shops:[{selected:!0,name:"VNG Campus D7",address:"Lô Z.06 - Đường số 13, KCX Tân Thuận, P. Tân Thuận Đông, Q.7, TP Hồ Chí Minh.",open:{hour:8,minute:0},close:{hour:17,minute:0}},{name:"210 Nguyễn Trãi",address:"210 Nguyễn Trãi, Phường Phạm Ngũ Lão, Quận 1, Thành phố Hồ Chí Minh",open:{hour:8,minute:0},close:{hour:17,minute:0}},{name:"Opera House",address:"07 Công Trường Lam Sơn, Bến Nghé, Quận 1, Thành phố Hồ Chí Minh",open:{hour:8,minute:0},close:{hour:17,minute:0}},{name:"Sài Gòn Tower",address:"29 Lê Duẩn, Bến Nghé, Quận 1, Thành phố Hồ Chí Minh",open:{hour:8,minute:0},close:{hour:17,minute:0}},{name:"Sala 2",address:"125 Nguyễn Cơ Thạch, An Lợi Đông, Quận 2, Thành phố Hồ Chí Minh",open:{hour:8,minute:0},close:{hour:17,minute:0}}],cart:[],discounts:[{code:"GIAM20K",name:"Ưu đãi 20K! Đặt Coffee Shop trên Zalo.",expireDate:"10/05/2021",image:"discount-1"},{code:"GIAM35%",name:"Giảm 35% cho đơn hàng từ 5 món, tối đa 59K...",expireDate:"10/05/2021",image:"discount-2"},{code:"GIAM30K",name:"Ưu đãi 30K cho đơn hàng 149K - Áp dụng cho dịch ...",expireDate:"10/05/2021",image:"discount-3"}],selectedDiscount:null,addresses:[],shippingTime:[new Date,(new Date).getHours(),(new Date).getMinutes()],note:""},getters:{user:({state:e})=>e.user,categories:({state:e})=>e.categories,products:({state:e})=>e.products,loadingProducts:({state:e})=>e.loadingProducts,shops:({state:e})=>e.shops,selectedShop:({state:e})=>e.shops.find((e=>e.selected)),selectedAddress:({state:e})=>e.selectedAddress,selectableShops:({state:e})=>e.shops.filter((e=>!e.selected)),cart:({state:e})=>e.cart,totalQuantity:({state:e})=>e.cart.reduce(((e,t)=>e+t.quantity),0),totalAmount:({state:e})=>e.cart.reduce(((e,t)=>e+t.subtotal),0),shipping:({state:e})=>e.shipping,showCheckout:({state:e})=>e.showCheckout,discounts:({state:e})=>e.discounts,selectedDiscount:({state:e})=>e.selectedDiscount,orders:({state:e})=>e.orders,loadingOrders:({state:e})=>e.loadingOrders,address:({state:e})=>e.address,shippingTime:({state:e})=>e.shippingTime,phone:({state:e})=>e.phone,note:({state:e})=>e.note,addresses:({state:e})=>e.addresses},actions:{selectShop({state:e},t){e.shops=e.shops.map((e=>o(c({},e),{selected:e.name===t})))},selectAddress({state:e},t){e.selectedAddress=t},addToCart({state:e},t){e.cart=e.cart.concat(t)},updateCartItem({state:e},{index:t,item:a}){e.cart[t]=a,e.cart=[...e.cart]},removeCartItem({state:e},t){e.cart=e.cart.filter(((e,a)=>a!==t)),0===e.cart.length&&(e.showCheckout=!1)},ship({state:e},t){e.shipping=t},setShowCheckout({state:e},t){e.showCheckout=t},useDiscount({state:e},t){e.selectedDiscount=t,e.cart.length>0&&(e.showCheckout=!0)},setUser({state:e},t){e.user=t,Z(t)},reOrder({state:e},{cart:t,phone:a,note:n}){e.cart=t,e.phone=a,e.note=n,e.showCheckout=!0},setAddress({state:e},t){e.address=t},setShippingTime({state:e},t){e.shippingTime=t},setPhone({state:e},t){e.phone=t},setNote({state:e},t){e.note=t},fetchProducts(e){return m(this,arguments,(function*({state:e}){e.loadingProducts=!0;const t=yield new Promise((e=>{d.getStorage({keys:["products"],success:({products:t})=>{t&&e(t),e([])},fail:t=>{console.log("Failed to load products from cache. Details: ",t),e([])}})}));t.length&&(e.products=t,e.loadingProducts=!1);const a=yield ae();a.length&&(e.products=a,R(a),e.loadingProducts=!1)}))},fetchOrders(e){return m(this,arguments,(function*({state:e}){e.loadingOrders=!0;const t=yield se();e.orders=t,e.loadingOrders=!1}))},fetchAddresses(e){return m(this,arguments,(function*({state:e}){const t=yield Q();e.addresses=t,!e.selectedAddress&&t.length>0&&(e.selectedAddress=t[t.length-1])}))},checkout(e){return m(this,arguments,(function*({state:e}){const{cart:t,selectedDiscount:a,shipping:n,selectedAddress:s,shippingTime:l,note:r}=e;let c=null;n||(c=e.shops.find((e=>e.selected)));const o=yield ne({cart:t,selectedDiscount:a,shipping:n,shop:c,address:s,shippingTime:l,note:r});o.error?u.toast.create({text:"Đã có lỗi xảy ra! Mã lỗi :"+o.message,closeTimeout:3e3,position:"center"}).open():(e.showCheckout=!1,e.cart=[],e.user.isFollowing?u.toast.create({text:o.message,closeTimeout:5e3,position:"center"}).open():u.dialog.create({title:o.message,content:"Quan tâm Official Account của Shop để nhận thông tin đặt hàng lần sau?",buttons:[{text:"Không",close:!0},{text:"Đồng Ý",close:!0,onClick(){re()}}]}).open(),u.views.main.router.navigate("/history"))}))},login(e){return m(this,arguments,(function*({dispatch:e}){const t=yield X();t&&e("setUser",t);const a=yield le();if(yield Y(a)){const t=yield te();t&&e("setUser",t)}}))},loginOA(e){return m(this,arguments,(function*({dispatch:e}){const t=yield X();t&&e("setUser",t);if(yield ee(t)){const t=yield te();t&&e("setUser",t)}}))}}}),oe=e=>{var t=e,{amount:a,unit:n}=t,s=i(t,["amount","unit"]);return p.createElement(g,c({},s),a.toLocaleString(),n||" VNĐ")},ie=e=>{var t=e,{amount:a}=t,n=i(t,["amount"]);return p.createElement(g,c({className:"text-secondary"},n),"+",a.toLocaleString()," đ")};var me=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",Price:oe,ExtraPrice:ie}),de="//h5.zdn.vn/zapps/564277748393618292/zdev-06163b77/assets/shop.848b954b.svg",ue="//h5.zdn.vn/zapps/564277748393618292/zdev-06163b77/assets/delivery.9e0e8488.svg";const he=({product:e,children:t,cartItem:a,cartIndex:n})=>{const{name:s,price:l,image:r,sizes:c,toppings:o}=e,[i,m]=E.exports.useState(!1),[d,h]=E.exports.useState(1),[A,O]=E.exports.useState(c[0]),[D,_]=E.exports.useState(),[P,F]=E.exports.useState("");E.exports.useEffect((()=>{a&&(h(a.quantity),O(a.size),_(a.topping),F(a.note))}),[i]);const M=E.exports.useMemo((()=>{let e=l;return A&&(e+=A.extra),D&&(e+=D.extra),e*=d,e}),[d,A,D]),j=()=>{const t={quantity:d,size:A,topping:D,subtotal:M,note:P,product:e};a?ce.dispatch("updateCartItem",{index:n,item:t}):ce.dispatch("addToCart",t)},L=()=>{j(),m(!1),ce.dispatch("setShowCheckout",!0)};return p.createElement("div",null,p.createElement("div",{onClick:()=>m(!0)},t),p.createElement(y,{className:"custom-action-sheet product-order",opened:i,onActionsClosed:()=>m(!1)},p.createElement(f,null,p.createElement(N,{typeName:"ghost",className:"close-button",onClick:()=>m(!1)},p.createElement(b,{zmp:"zi-close",size:24})),p.createElement(v,{bold:!0},p.createElement("span",{className:"title"},"Chọn thức uống"))),p.createElement(f,null,p.createElement(v,{className:"bg-white product-preview"},p.createElement(x,null,p.createElement(C,{className:"image"},p.createElement("img",{src:r,className:"w-100"})),p.createElement(C,{className:"description"},p.createElement(S,{bold:!0},s),p.createElement(oe,{amount:l})))),p.createElement(v,{className:"p-0 text-left"},p.createElement(z,null,p.createElement(g,{bold:!0},"Chọn Size")),p.createElement(k,{className:"my-0"},c.map((e=>p.createElement(T,{key:e.name,radio:!0,value:e.name,name:"s",title:e.name,checked:A===e,onClick:()=>O(e)},e.extra&&p.createElement(ie,{amount:e.extra})))))),p.createElement(v,{className:"p-0 text-left"},p.createElement(z,null,p.createElement(g,{bold:!0},"Chọn Topping")),p.createElement(k,{className:"my-0"},o.map((e=>p.createElement(T,{key:e.name,radio:!0,value:e.name,name:"t",title:e.name,checked:D===e,onClick:()=>_(e)},e.extra&&p.createElement(ie,{amount:e.extra})))))),p.createElement(v,{className:"p-0 text-left"},p.createElement(z,null,p.createElement(g,{bold:!0},"Số lượng")),p.createElement(k,{className:"my-0"},p.createElement(T,null,p.createElement("div",{className:"quantity-selector"},p.createElement(N,{small:!0,typeName:"tertiary",onClick:()=>{const e=a?0:1;h(d>e?d-1:e)}},"-"),p.createElement(z,{mx:6,mt:1},d),p.createElement(N,{small:!0,typeName:"tertiary",onClick:()=>{h(d+1)}},"+"))))),p.createElement(v,{className:"p-0 text-left"},p.createElement(z,null,p.createElement(g,{bold:!0},"Ghi chú")),p.createElement(k,{className:"my-0"},p.createElement(T,null,p.createElement("div",{className:"note"},p.createElement(w,{value:P,onChange:e=>F(e.target.value),type:"text",placeholder:"Nhập ghi chú (VD. Ít đá, nhiều đường...)"})))))),p.createElement(f,null),p.createElement(f,{className:"sticky-action-footer"},p.createElement(v,{className:"p-2 text-left"},p.createElement(x,null,p.createElement(C,null,p.createElement(z,null,"Tổng tiền")),p.createElement(C,{className:"text-right"},p.createElement(z,null,p.createElement(oe,{className:"text-primary",bold:!0,fontSize:20,amount:M})))),p.createElement(x,{gap:"gap_4",className:"actions"},a?p.createElement(C,null,d>0?p.createElement(N,{responsive:!0,typeName:"primary",onClick:L},"Cập nhật giỏ hàng"):p.createElement(N,{responsive:!0,typeName:"destructive",onClick:()=>{u.dialog.create({title:"Xác nhận",content:"Bạn có chắc muốn xoá sản phẩm này khỏi đơn hàng?",buttons:[{text:"Không",close:!0},{text:"Đồng Ý",close:!0,onClick(){m(!1),ce.dispatch("removeCartItem",n)}}]}).open()}},"Xoá khỏi giỏ hàng")):p.createElement(p.Fragment,null,p.createElement(C,null,p.createElement(N,{responsive:!0,typeName:"secondary",onClick:L},"Mua ngay")),p.createElement(C,null,p.createElement(N,{responsive:!0,typeName:"primary",onClick:()=>{j(),m(!1)}},"Thêm vào giỏ"))))))))};he.displayName="zmp-product-order";var pe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:he}),ge="//h5.zdn.vn/zapps/564277748393618292/zdev-06163b77/assets/pickup.66d63121.svg";const Ee=({name:e,address:t,selected:a,open:n,close:s})=>{const l=e=>String(e).padStart(2,0),r=E.exports.useMemo((()=>{const e=new Date,t=e.getHours(),a=e.getMinutes();let l=!1;return(t<n.hour||t===n.hour&&a<n.minute)&&(l=!0),(t>s.hour||t===s.hour&&a>s.minute)&&(l=!0),l}),[n,s]);return p.createElement(A,{className:"bg-white "+(a?"active":"inactive"),onClick:()=>{ce.dispatch("selectShop",e)}},p.createElement(O,{src:de,size:"24"}),p.createElement("div",{className:"description"},p.createElement(g,{bold:!0,fontSize:"16"},e),p.createElement(g,{className:"text-secondary"},t),p.createElement(g,null,"Mở bán từ ",l(n.hour),"h",l(n.minute)," - ",l(s.hour),"h",l(s.minute),r&&p.createElement("span",{className:"text-danger"}," (Đã đóng cửa)"))))},ye=({onBack:e})=>{const[t,a]=E.exports.useState(""),n=D("selectedShop"),s=D("selectableShops"),l=E.exports.useMemo((()=>t?s.filter((e=>`${e.name} ${e.address}`.toLowerCase().includes(t.trim().toLowerCase()))):s),[t,s]);return p.createElement(p.Fragment,null,p.createElement(f,null,p.createElement(N,{typeName:"ghost",className:"close-button",onClick:e},p.createElement(b,{zmp:"zi-arrow-left",size:24})),p.createElement(v,{bold:!0},p.createElement("span",{className:"title"},"Chọn cửa hàng"))),p.createElement(f,null,p.createElement(v,{bold:!0},p.createElement(_,{value:t,onChange:e=>a(e.target.value),type:"text",placeholder:"Tìm địa chỉ, tên chi nhánh...",clearButton:!0,onSearchbarClear:()=>a("")})),t?p.createElement(p.Fragment,null,p.createElement(v,{className:"p-0"},p.createElement(z,null,l.length?p.createElement(g,{bold:!0,className:"text-left"},"Kết quả"):p.createElement(g,{bold:!0},"Không tìm thấy"))),l.map((e=>p.createElement(Ee,c({key:e.name},e))))):p.createElement(p.Fragment,null,p.createElement(v,{className:"p-0"},p.createElement(z,null,p.createElement(x,null,p.createElement(C,{width:"70",className:"text-left"},p.createElement(g,{bold:!0,className:"mb-0"},"Cửa hàng đang chọn")),p.createElement(C,{width:"30",className:"text-right"},p.createElement(P,{className:"text-primary"},"Tìm gần nhất"))))),p.createElement(Ee,c({},n)),p.createElement(v,{className:"p-0"},p.createElement(z,{className:"text-left"},p.createElement(g,{bold:!0},"Cửa hàng khác"))),l.map((e=>p.createElement(Ee,c({key:e.name},e)))))))};ye.displayName="zmp-shop-picker";var fe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",Shop:Ee,default:ye});const Ne=e=>{const{name:t,address:a,selected:n,phone:s}=e;return p.createElement(A,{className:"bg-white "+(n?"active":"inactive"),onClick:()=>{ce.dispatch("selectAddress",e)}},p.createElement("img",{src:ue,className:"custom-icon"}),p.createElement("div",{className:"description"},p.createElement(g,{className:"mb-0",bold:!0,fontSize:"16"},t," - ",s),p.createElement(g,{className:"text-secondary"},a)))},be=({onBack:e})=>{const[t,a]=E.exports.useState(""),n=D("selectedAddress"),s=D("addresses"),l=D("user"),r=E.exports.useMemo((()=>t?s.filter((e=>`${e.name} ${e.address}`.toLowerCase().includes(t.trim().toLowerCase()))):s),[t,s]),i=E.exports.useMemo((()=>r.filter((e=>n?e.address!==n.address:r))),[r]),[d,u]=E.exports.useState(!1),[h,y]=E.exports.useState(""),[S,A]=E.exports.useState(""),[F,M]=E.exports.useState("");return E.exports.useEffect((()=>{!h&&l&&y(l.name)}),[l]),p.createElement(p.Fragment,null,p.createElement(f,null,p.createElement(N,{typeName:"ghost",className:"close-button",onClick:e},p.createElement(b,{zmp:"zi-arrow-left",size:24})),p.createElement(v,{bold:!0},p.createElement("span",{className:"title"},"Chọn địa chỉ nhận hàng"))),p.createElement(f,null,d||0===s.length?p.createElement(v,{className:"p-0"},p.createElement(z,{className:"text-left"},p.createElement(g,{bold:!0},"Thêm địa chỉ nhận hàng")),p.createElement(k,{className:"my-0"},p.createElement(T,{className:"editable-info"},p.createElement(z,{slot:"root-start",className:"label"},"Tên người nhận"),p.createElement(b,{slot:"media",zmp:"zi-user-circle",size:"24"}),p.createElement("div",{className:"inline-input"},p.createElement(w,{type:"text",placeholder:"Nhập tên người nhận...",value:h,onChange:e=>y(e.target.value)}))),p.createElement(T,{className:"editable-info"},p.createElement(z,{slot:"root-start",className:"label"},"Địa chỉ"),p.createElement(b,{slot:"media",zmp:"zi-location-solid",size:"24"}),p.createElement("div",{className:"inline-input"},p.createElement(w,{type:"textarea",placeholder:"Nhập địa chỉ...",resizable:!0,value:S,onChange:e=>A(e.target.value)}))),p.createElement(T,{className:"editable-info"},p.createElement(z,{slot:"root-start",className:"label"},"Số điện thoại"),p.createElement(O,{slot:"media",src:"//h5.zdn.vn/zapps/564277748393618292/zdev-06163b77/assets/phone.e591a3f5.svg",size:"24"}),p.createElement("div",{className:"inline-input"},p.createElement(w,{type:"text",placeholder:"Nhập số điện thoại...",value:F,onChange:e=>M(e.target.value)}))),p.createElement(T,{className:"editable-info"},p.createElement(N,{className:"mb-2",fill:!0,responsive:!0,large:!0,onClick:()=>m(this,null,(function*(){const t={name:h,address:S,phone:F};yield V(t),yield ce.dispatch("fetchAddresses"),yield ce.dispatch("selectAddress",t),u(!1),e&&e()})),disabled:!h||!F||!S},"Lưu địa chỉ")))):p.createElement(p.Fragment,null,p.createElement(v,{bold:!0},p.createElement(_,{value:t,onChange:e=>a(e.target.value),type:"text",placeholder:"Tìm địa chỉ, tên chi nhánh...",clearButton:!0,onSearchbarClear:()=>a("")})),t?p.createElement(p.Fragment,null,p.createElement(v,{className:"p-0"},p.createElement(z,null,r.length?p.createElement(g,{bold:!0,className:"text-left"},"Kết quả"):p.createElement(g,{bold:!0},"Không tìm thấy"))),r.map(((e,t)=>p.createElement(Ne,c({key:t},e))))):p.createElement(p.Fragment,null,n&&p.createElement(p.Fragment,null,p.createElement(v,{className:"p-0"},p.createElement(z,null,p.createElement(x,null,p.createElement(C,{width:"60",className:"text-left"},p.createElement(g,{bold:!0,className:"mb-0"},"Địa chỉ đang chọn")),p.createElement(C,{width:"40",className:"text-right"},p.createElement(P,{className:"text-primary",onClick:()=>u(!0)},"Thêm địa chỉ mới"))))),p.createElement(Ne,o(c({},n),{selected:!0}))),i.length>0&&p.createElement(p.Fragment,null,p.createElement(v,{className:"p-0"},p.createElement(z,{className:"text-left"},p.createElement(g,{bold:!0},"Địa chỉ khác"))),i.map(((e,t)=>p.createElement(Ne,c({key:t},e)))))))))};be.displayName="zmp-address-picker";var ve=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",Address:Ne,default:be});const xe=({children:e,onReturn:t,onOpen:a})=>{const[n,s]=E.exports.useState(!1),l=D("selectedShop"),r=D("selectedAddress"),c=D("shipping"),[o,i]=E.exports.useState();E.exports.useEffect((()=>{i("summary")}),[n]);const m=(e,t)=>{e.preventDefault(),e.stopPropagation(),i("detail"),ce.dispatch("ship",t)};E.exports.useEffect((()=>{ce.dispatch("fetchAddresses")}),[]);return p.createElement(p.Fragment,null,p.createElement("div",{onClick:()=>s(!0)},e),p.createElement(y,{className:"custom-action-sheet",opened:n,onActionsClosed:()=>s(!1),onActionsClose:()=>{"detail"===o?i("summary"):t&&t()},onActionsOpen:()=>{a&&a()}}," ","summary"===o?p.createElement(p.Fragment,null,p.createElement(f,null,p.createElement(N,{typeName:"ghost",className:"close-button",onClick:()=>s(!1)},p.createElement(b,{zmp:"zi-close",size:24})),p.createElement(v,{bold:!0},p.createElement("span",{className:"title"},"Chọn phương thức nhận hàng"))),p.createElement(f,null,p.createElement(A,{className:c?"inactive":"active",onClick:()=>ce.dispatch("ship",!1)},p.createElement(O,{src:ge}),p.createElement("div",{className:"description mr-2"},p.createElement(g,{bold:!0,fontSize:"16",className:"text-primary my-1"},"Tự đến lấy"),p.createElement(g,{className:"text-secondary ellipsis"},l.name," - ",l.address)),p.createElement(N,{typeName:"secondary",onClick:e=>m(e,!1)},"Sửa")),p.createElement(A,{className:c?"active":"inactive",onClick:()=>{ce.dispatch("ship",!0),r?(s(!1),t()):i("detail")},close:!1},p.createElement(O,{src:ue}),p.createElement("div",{className:"description"},p.createElement(g,{bold:!0,fontSize:"16",className:"text-primary my-1"},"Giao tận nơi"),r?p.createElement(p.Fragment,null,p.createElement(g,{className:"mb-0",bold:!0},r.name," - ",r.phone),p.createElement(g,null,r.address)):p.createElement(g,{className:"text-secondary"},"Tài xế giao đến địa chỉ của bạn")),p.createElement(N,{typeName:"secondary",onClick:e=>m(e,!0)},"Sửa")))):c?p.createElement(be,{onBack:()=>i("summary")}):p.createElement(ye,{onBack:()=>i("summary")})))};xe.displayName="zmp-delivery-method-picker";var Ce=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:xe});const Se=[{values:[0,1,2,3,4,5,6,7,8,9,10].map((e=>{const t=new Date;return t.setDate(t.getDate()+e),t})),displayValues:["Hôm nay","Ngày mai"].concat([2,3,4,5,6,7,8,9,10].map((e=>{const t=new Date;return t.setDate(t.getDate()+e),t.toLocaleDateString()})))},{values:[8,9,10,11,12,13,14,15,16,17,18,19,20,21],displayValues:[8,9,10,11,12,13,14,15,16,17,18,19,20,21].map((e=>`${e} giờ`))},{values:[...Array(60)].map(((e,t)=>t)),displayValues:[...Array(60)].map(((e,t)=>`${t} phút`))}],ze=e=>{var t=e,{onChange:a}=t,n=i(t,["onChange"]);const s=E.exports.useMemo((()=>{const e=Se[0].values[0];return[e,e.getHours(),e.getMinutes()]}));return p.createElement(F,o(c({},n),{data:Se,inputId:"shipping-time-picker",onChange:(e,t)=>{a&&a(t)},defaultSelect:s,formatValue:(e,t)=>`${t[0]}, ${t[1]} ${t[2]}`}))};ze.displayName="zmp-shipping-time-picker";var ke=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:ze});const Te=({children:e,onReturn:t})=>{const a=D("showCheckout"),n=e=>{ce.dispatch("setShowCheckout",e)},s=D("selectedShop"),l=D("selectedAddress"),r=D("cart"),c=D("totalAmount"),o=D("shipping"),[i,d]=E.exports.useState(!1);E.exports.useEffect((()=>d(a)),[a]);const h=D("selectedDiscount"),[x,C]=E.exports.useState(!1),S=D("shippingTime"),A=D("note"),[_,F]=E.exports.useState(!0);return p.createElement(p.Fragment,null,p.createElement("div",{onClick:()=>n(!0)},e),p.createElement(y,{className:"custom-action-sheet",opened:i,onActionsClosed:()=>n(!1),onActionsClose:()=>{t&&t()}},p.createElement(f,null,p.createElement(N,{typeName:"ghost",className:"close-button",onClick:()=>n(!1)},p.createElement(b,{zmp:"zi-arrow-left",size:24})),p.createElement(v,{bold:!0},p.createElement("span",{className:"title"},"Xác nhận đơn hàng"))),p.createElement(f,null,p.createElement(v,{className:"p-0"},p.createElement(z,{className:"text-left"},p.createElement(g,{bold:!0},"Phương thức nhận hàng")),p.createElement(xe,{onOpen:()=>n(!1),onReturn:()=>n(!0)},p.createElement(k,{className:"my-0"},p.createElement(T,null,o?p.createElement(O,{slot:"media",src:ue,size:"24"}):p.createElement(O,{slot:"media",src:de,size:"24"}),p.createElement(b,{slot:"content",zmp:"zi-chevron-right"}),o?p.createElement(z,{className:"text-left"},p.createElement(g,{bold:!0,fontSize:"16"},"Giao tận nơi"),l?p.createElement(p.Fragment,null,p.createElement(g,{bold:!0,className:"mb-0"},l.name," - ",l.phone),p.createElement(g,null,l.address)):p.createElement(g,{className:"text-secondary"},"Tài xế giao đến địa chỉ của bạn")):p.createElement(z,{className:"text-left"},p.createElement(g,{bold:!0,fontSize:"16"},s.name),p.createElement(g,{className:"text-secondary"},s.address)))))),p.createElement(v,{className:"p-0"},p.createElement(z,{className:"text-left"},p.createElement(g,{bold:!0},"Thông tin khách hàng")),p.createElement(k,{className:"my-0"},p.createElement(T,{className:"shipping-time"},p.createElement(z,{slot:"root-start",className:"label"},"Thời gian nhận hàng"),p.createElement(O,{slot:"media",src:"//h5.zdn.vn/zapps/564277748393618292/zdev-06163b77/assets/clock.57abba1d.svg",size:"24"}),p.createElement(b,{slot:"content",zmp:"zi-chevron-right"}),p.createElement(ze,{value:S,onChange:e=>ce.dispatch("setShippingTime",e),placeholder:"Thời gian nhận hàng",title:"Thời gian nhận hàng",className:"flex-1"})),p.createElement(T,{className:"editable-info"},p.createElement(z,{slot:"root-start",className:"label"},"Ghi chú"),p.createElement("img",{slot:"media",src:"//h5.zdn.vn/zapps/564277748393618292/zdev-06163b77/assets/note.76fe8e07.svg",size:"24"}),p.createElement("div",{className:"inline-input"},p.createElement(w,{type:"textarea",maxlength:500,placeholder:"Nhập nội dung ghi chú... (tối đa 500 ký tự)",resizable:!0,value:A,onChange:e=>ce.dispatch("setNote",e.target.value)}))))),p.createElement(v,{className:"p-0"},p.createElement(z,{className:"text-left"},p.createElement(g,{bold:!0},"Thông tin đơn hàng")),p.createElement(k,{className:"my-0"},r.map(((e,t)=>p.createElement(T,{key:t},p.createElement("img",{slot:"media",src:e.product.image,className:"product-image"}),p.createElement(oe,{slot:"content",amount:e.subtotal,unit:"đ",className:"pr-4"}),p.createElement(z,{className:"text-left"},p.createElement(g,{className:"mb-0",bold:!0},p.createElement("span",{className:"text-danger"},e.quantity,"x")," ",e.product.name),p.createElement("div",{className:"d-flex"},e.size&&p.createElement(g,{className:"mb-0 text-secondary"},"Size ",e.size.name,e.topping&&", "),e.topping&&p.createElement(g,{className:"mb-0 text-secondary"},e.topping.name)),e.note&&p.createElement(g,{className:"mb-0 text-secondary"},"Ghi chú: ",e.note),p.createElement(he,{product:e.product,cartItem:e,cartIndex:t},p.createElement(P,{className:"text-primary"},"Chỉnh sửa")))))),p.createElement(T,null,p.createElement(g,{slot:"media",className:"text-secondary"},"Tạm tính"),p.createElement(oe,{slot:"content",amount:c,unit:"đ",className:"pr-4"}))))),p.createElement(f,null),p.createElement(v,{className:"sticky-action-footer"},p.createElement(k,{className:"my-0"},p.createElement(T,null,p.createElement(g,{slot:"before-title",className:"text-secondary mb-0"},"Mã ưu đãi"),p.createElement(b,{slot:"content",zmp:"zi-chevron-right"}),p.createElement(P,{onClick:()=>{u.views.main.router.navigate("/discount"),n(!1)},slot:"after"},h?p.createElement(g,{slot:"after",bold:!0,className:"mb-0"},h):p.createElement(g,{className:"text-secondary mb-0"},"Chọn mã ưu đãi"))),p.createElement(T,null,p.createElement("div",{className:"flex-1"},p.createElement(z,{className:"d-flex v-center"},p.createElement(M,{checked:_,onChange:e=>F(e.target.checked),label:p.createElement(g,{className:"text-left mb-0",fontSize:12},"Tôi đồng ý nhận món từ ",p.createElement("b",null,S[1],"h",`${S[2]}`.padStart(2,0)," - ",Number(S[1])+1,"h",`${S[2]}`.padStart(2,0)),". ",p.createElement("a",{onClick:()=>{document.querySelector("#shipping-time-picker").click()},className:"text-primary d-inline"},"Chọn giờ khác."))})),p.createElement(z,{className:"d-flex v-center space-between"},p.createElement(g,null,"Tổng tiền"),p.createElement(oe,{fontSize:20,bold:!0,amount:c})),p.createElement(z,null,p.createElement(N,{onClick:()=>m(this,null,(function*(){C(!0),yield ce.dispatch("checkout"),C(!1)})),large:!0,responsive:!0,fill:!0,disabled:x||!_},x&&p.createElement(j,{className:"loading-button"}),"Thanh toán bằng ZaloPay"))))))))};Te.displayName="zmp-checkout";var we=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Te});const Ae=()=>{const e=D("totalQuantity"),t=D("totalAmount"),[a,n]=E.exports.useState();u.views.main.router.on("routeChange",(({path:e})=>{n(e)}));const s=[{name:"Đặt món",href:"/",icon:"//h5.zdn.vn/zapps/564277748393618292/zdev-06163b77/assets/cup.6f42e61c.svg"},{name:"Ưu đãi",href:"/discount",icon:"//h5.zdn.vn/zapps/564277748393618292/zdev-06163b77/assets/discount.c4009c31.svg"},{name:"Lịch sử",href:"/history",icon:"//h5.zdn.vn/zapps/564277748393618292/zdev-06163b77/assets/history.8785b7b3.svg"}];E.exports.useEffect((()=>{e>0?document.body.classList.add("has-cart"):document.body.classList.remove("has-cart")}),[e]);return p.createElement("div",{className:"bottom-navigation"},e>0&&p.createElement("div",{className:"cart"},p.createElement(z,null,p.createElement(oe,{fontSize:20,bold:!0,amount:t,className:"mb-0"}),p.createElement(g,{className:"text-secondary"},"Bạn có ",e," món trong giỏ hàng.")),p.createElement(z,{className:"text-right"},p.createElement(Te,null,p.createElement(N,{fill:!0,large:!0},"Giỏ hàng")))),p.createElement(L,{bottom:!0},s.map((({name:e,icon:t,href:n})=>p.createElement(P,{key:n,className:n===a?"active":"inactive",onClick:()=>{return e=n,void u.views.main.router.navigate(e,{animate:!1});var e}},p.createElement("img",{src:t}),e)))))};Ae.displayName="zmp-bottom-navigation";var Oe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Ae});const De=()=>{const e={name:"Coffee Shop",theme:"auto",store:ce};return I((()=>{ce.dispatch("loginOA")})),p.createElement(K,c({},e),p.createElement(B,{main:!0,className:"safe-areas",url:"/"}),p.createElement(Ae,null))};var _e=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:De});var Pe={app:{title:"Coop Online",orientation:"auto",leftButton:"none"},debug:!1,listCSS:[],listSyncJS:[],listAsyncJS:[],pages:["/discount","/history"]};window.APP_CONFIG||(window.APP_CONFIG=Pe),G.use(U),$.render(p.createElement(De),document.getElementById("app"));export{he as P,oe as a,me as b,q as c,pe as d,fe as e,re as f,ve as g,Ce as h,ke as i,we as j,Oe as k,_e as l,ge as p,ce as s};
